import logging
from unittest import TestCase

from PlantEd.utils import LSystem


class TestSlider(TestCase):
    def setUp(self):
        logging.basicConfig(level=logging.DEBUG)
        logging.getLogger().setLevel(logging.DEBUG)

    def test_dict_conversion(self):
        # basic root structure
        root = {
            'root_grid': {1: 1.0, 2: 0.0, 3: 0.0, 4: 0.0, 5: 0.0, 6: 0.0, 7: 0.0, 8: 0.0, 9: 0.0, 10: 1.0, 11: 1.0,
                          12: 0.0,
                          13: 0.0, 14: 0.0, 15: 0.0, 16: 0.0, 17: 0.0, 18: 0.0, 19: 0.0, 20: 0.0, 21: 0.0, 22: 0.0,
                          23: 0.0,
                          24: 0.0, 25: 0.0, 26: 0.0, 27: 0.0, 28: 0.0, 29: 0.0, 30: 1.0, 31: 0.0, 32: 0.0, 33: 0.0,
                          34: 0.0,
                          35: 0.0, 36: 0.0, 37: 0.0, 38: 0.0, 39: 0.0, 40: 0.0, 41: 0.0, 42: 0.0, 43: 0.0, 44: 0.0,
                          45: 0.0,
                          46: 0.0, 47: 0.0, 48: 0.0, 49: 0.0, 50: 0.0, 51: 0.0, 52: 0.0, 53: 0.0, 54: 0.0, 55: 0.0,
                          56: 0.0,
                          57: 0.0, 58: 0.0, 59: 0.0, 60: 0.0, 61: 0.0, 62: 0.0, 63: 0.0, 64: 0.0, 65: 0.0, 66: 0.0,
                          67: 0.0,
                          68: 0.0, 69: 0.0, 70: 0.0, 71: 0.0, 72: 0.0, 73: 0.0, 74: 0.0, 75: 0.0, 76: 0.0, 77: 0.0,
                          78: 0.0,
                          79: 0.0, 80: 0.0, 81: 0.0, 82: 0.0, 83: 0.0, 84: 0.0, 85: 0.0, 86: 0.0, 87: 0.0, 88: 0.0,
                          89: 0.0,
                          90: 0.0, 91: 0.0, 92: 0.0, 93: 0.0, 94: 0.0, 95: 0.0, 96: 0.0, 97: 0.0, 98: 0.0, 99: 0.0,
                          100: 0.0, 101: 0.0, 102: 0.0, 103: 0.0, 104: 0.0, 105: 0.0, 106: 0.0, 107: 0.0, 108: 0.0,
                          109: 0.0, 110: 0.0, 111: 0.0, 112: 0.0, 113: 0.0, 114: 0.0, 115: 0.0, 116: 0.0, 117: 0.0,
                          118: 0.0, 119: 0.0, 120: 0.0}, 'water_grid_pos': (0, 900),
            'positions': [(955.0, 904.0), (955.0, 904.0)], 'apexes': [], 'directions': [], 'root_classes': [
            [{'max_length': 150, 'duration': 4, 'tries': 5, 'max_branches': 5},
             {'max_length': 100, 'duration': 2, 'tries': 4, 'max_branches': 5},
             {'max_length': 30, 'duration': 1, 'tries': 1, 'max_branches': 0}],
            [{'max_length': 600, 'duration': 5, 'tries': 5, 'max_branches': 5},
             {'max_length': 250, 'duration': 3, 'tries': 4, 'max_branches': 3},
             {'max_length': 50, 'duration': 2, 'tries': 1, 'max_branches': 0}],
            [{'max_length': 800, 'duration': 6, 'tries': 6, 'max_branches': 3},
             {'max_length': 450, 'duration': 4, 'tries': 5, 'max_branches': 2},
             {'max_length': 90, 'duration': 2, 'tries': 1, 'max_branches': 0}]], 'first_letters': [
            {'id': 99, 'tier': 0, 'root_class': 0, 'length': 30.0, 'max_length': 30.0, 'mass_start': 1, 'mass_end': 1.8,
             'branching_t': None, 'branches': [
                {'id': 99, 'tier': 0, 'root_class': 0, 'length': 17.462638136234233, 'max_length': 90.0,
                 'mass_start': 1.8,
                 'mass_end': 4.2, 'branching_t': [], 'branches': [
                    {'id': 99, 'tier': 1, 'root_class': 0, 'length': 20.0, 'max_length': 20.0,
                     'mass_start': 2.2656703502995796, 'mass_end': 2.6656703502995795, 'branching_t': None,
                     'branches': [
                         {'id': 99, 'tier': 1, 'root_class': 0, 'length': 12.263276552283541, 'max_length': 60.0,
                          'mass_start': 2.6656703502995795, 'mass_end': 3.8656703502995797, 'branching_t': [],
                          'branches': [
                              {'id': 99, 'tier': 2, 'root_class': 0, 'length': 6.0, 'max_length': 6.0,
                               'mass_start': 2.9109358813452504, 'mass_end': 3.1109358813452506, 'branching_t': None,
                               'branches': [{'id': 99, 'tier': 2, 'root_class': 0, 'length': 18.0, 'max_length': 18.0,
                                             'mass_start': 3.1109358813452506, 'mass_end': 3.7109358813452507,
                                             'branching_t': [], 'branches': [
                                       {'id': 99, 'tier': 2, 'root_class': 0, 'length': 6.0, 'max_length': 6.0,
                                        'mass_start': 3.7109358813452507, 'mass_end': 3.910935881345251,
                                        'branching_t': None,
                                        'branches': [], 'max_branches': None, 't': 1,
                                        'pos': (943.3195049443465, 959.6695258037696),
                                        'dir': (0.49254221085035726, 0.8702885559000775)}], 'max_branches': 0, 't': 1,
                                             'pos': (0, 0), 'dir': (-0.999628393121145, 0.027259414264389124)}],
                               'max_branches': None, 't': 0.20409972065852489, 'pos': (0, 0),
                               'dir': (0.8604410104359249, 0.5095500638406443)},
                              {'id': 99, 'tier': 1, 'root_class': 0, 'length': 19.06867578912492,
                               'max_length': 47.73672344771646, 'mass_start': 2.9109358813452504,
                               'mass_end': 3.8656703502995797, 'branching_t': [], 'branches': [
                                  {'id': 99, 'tier': 2, 'root_class': 0, 'length': 6.0, 'max_length': 6.0,
                                   'mass_start': 3.292309397127749, 'mass_end': 3.492309397127749, 'branching_t': None,
                                   'branches': [
                                       {'id': 99, 'tier': 2, 'root_class': 0, 'length': 18.0, 'max_length': 18.0,
                                        'mass_start': 3.492309397127749, 'mass_end': 4.0923093971277495,
                                        'branching_t': [], 'branches': [
                                           {'id': 99, 'tier': 2, 'root_class': 0, 'length': 6.0, 'max_length': 6.0,
                                            'mass_start': 4.0923093971277495, 'mass_end': 4.29230939712775,
                                            'branching_t': None, 'branches': [], 'max_branches': None, 't': 1,
                                            'pos': (948.1235026234979, 991.7814520958702),
                                            'dir': (-0.8633266320539521, 0.5046455452952895)}], 'max_branches': 0,
                                        't': 1,
                                        'pos': (0, 0), 'dir': (-0.20646291688590335, 0.9784544260981012)}],
                                   'max_branches': None, 't': 0.3987742837047302, 'pos': (0, 0),
                                   'dir': (-0.9883053795623646, 0.15248762811484215)},
                                  {'id': 99, 'tier': 1, 'root_class': 0, 'length': 11.483580267672684,
                                   'max_length': 28.668047658591536, 'mass_start': 3.292309397127749,
                                   'mass_end': 3.8656703502995797, 'branching_t': [], 'branches': [
                                      {'id': 99, 'tier': 2, 'root_class': 0, 'length': 6.0, 'max_length': 6.0,
                                       'mass_start': 3.5219810024812026, 'mass_end': 3.721981002481203,
                                       'branching_t': None,
                                       'branches': [
                                           {'id': 99, 'tier': 2, 'root_class': 0, 'length': 18.0, 'max_length': 18.0,
                                            'mass_start': 3.721981002481203, 'mass_end': 4.321981002481203,
                                            'branching_t': [], 'branches': [
                                               {'id': 99, 'tier': 2, 'root_class': 0, 'length': 6.0, 'max_length': 6.0,
                                                'mass_start': 4.321981002481203, 'mass_end': 4.521981002481203,
                                                'branching_t': None, 'branches': [], 'max_branches': None, 't': 1,
                                                'pos': (950.009832382947, 1010.2434303615917),
                                                'dir': (-0.9982740837902937, 0.058726941284640816)}], 'max_branches': 0,
                                            't': 1, 'pos': (0, 0),
                                            'dir': (-0.4371423928920477, 0.8993923105834376)}], 'max_branches': None,
                                       't': 0.40001342925989625, 'pos': (0, 0),
                                       'dir': (-0.5240382695727909, 0.8516947176207886)},
                                      {'id': 99, 'tier': 1, 'root_class': 0, 'length': 12.61867966425294,
                                       'max_length': 17.184467390918854, 'mass_start': 3.5219810024812026,
                                       'mass_end': 3.8656703502995797, 'branching_t': [], 'branches': [
                                          {'id': 99, 'tier': 2, 'root_class': 0, 'length': 6.0, 'max_length': 6.0,
                                           'mass_start': 3.7743545957662614, 'mass_end': 3.9743545957662616,
                                           'branching_t': None, 'branches': [
                                              {'id': 99, 'tier': 2, 'root_class': 0, 'length': 18.0, 'max_length': 18.0,
                                               'mass_start': 3.9743545957662616, 'mass_end': 4.574354595766262,
                                               'branching_t': [], 'branches': [
                                                  {'id': 99, 'tier': 2, 'root_class': 0, 'length': 6.0,
                                                   'max_length': 6.0,
                                                   'mass_start': 4.574354595766262, 'mass_end': 4.774354595766262,
                                                   'branching_t': None, 'branches': [], 'max_branches': None, 't': 1,
                                                   'pos': (953.5774968803255, 1026.8751597291896),
                                                   'dir': (0.2408662109923304, 0.9705583281813609)}], 'max_branches': 0,
                                               't': 1, 'pos': (0, 0), 'dir': (-0.4767490905204566, 0.879039421577848)}],
                                           'max_branches': None, 't': 0.7338193616808149, 'pos': (0, 0),
                                           'dir': (0.02163709129944256, 0.9997658907364761)},
                                          {'id': 99, 'tier': 1, 'root_class': 0, 'length': 4.5657877266659135,
                                           'max_length': 4.5657877266659135, 'mass_start': 3.7743545957662614,
                                           'mass_end': 3.8656703502995797, 'branching_t': [0.9994344806305506],
                                           'branches': [
                                               {'id': 99, 'tier': 1, 'root_class': 0, 'length': 20.0,
                                                'max_length': 20.0,
                                                'mass_start': 3.8656703502995797, 'mass_end': 4.26567035029958,
                                                'branching_t': None, 'branches': [], 'max_branches': None, 't': 1,
                                                'pos': (961.42180125693, 1012.9191817710932),
                                                'dir': (-0.31831847836769855, 0.9479838323144931)}], 'max_branches': 1,
                                           't': 1,
                                           'pos': (0, 0), 'dir': (-0.15802503924034195, 0.9874351051958242)}],
                                       'max_branches': 2, 't': 1, 'pos': (0, 0),
                                       'dir': (0.03398548330887773, 0.9994223266088575)}], 'max_branches': 3, 't': 1,
                                   'pos': (0, 0), 'dir': (0.10041126996775096, 0.9949460170599526)}], 'max_branches': 4,
                               't': 1, 'pos': (0, 0), 'dir': (0.24350741631111264, 0.9698990350554466)}],
                          'max_branches': 5,
                          't': 1, 'pos': (0, 0), 'dir': (-0.02378570534165525, 0.999717080088862)}],
                     'max_branches': None,
                     't': 0.19393130761918342, 'pos': (0, 0), 'dir': (-0.4491436354940321, 0.8934595652267673)},
                    {'id': 99, 'tier': 0, 'root_class': 0, 'length': 40.4009081833529, 'max_length': 72.53736186376577,
                     'mass_start': 2.2656703502995796, 'mass_end': 4.2, 'branching_t': [], 'branches': [
                        {'id': 99, 'tier': 1, 'root_class': 0, 'length': 20.0, 'max_length': 20.0,
                         'mass_start': 3.343027901855657, 'mass_end': 3.743027901855657, 'branching_t': None,
                         'branches': [
                             {'id': 99, 'tier': 1, 'root_class': 0, 'length': 0.6977924098730212, 'max_length': 60.0,
                              'mass_start': 3.743027901855657, 'mass_end': 4.9430279018556575, 'branching_t': [],
                              'branches': [{'id': 99, 'tier': 2, 'root_class': 0, 'length': 6.0, 'max_length': 6.0,
                                            'mass_start': 3.7569837500531174, 'mass_end': 3.9569837500531175,
                                            'branching_t': None, 'branches': [
                                      {'id': 99, 'tier': 2, 'root_class': 0, 'length': 18.0, 'max_length': 18.0,
                                       'mass_start': 3.9569837500531175, 'mass_end': 4.556983750053117,
                                       'branching_t': [],
                                       'branches': [
                                           {'id': 99, 'tier': 2, 'root_class': 0, 'length': 6.0, 'max_length': 6.0,
                                            'mass_start': 4.556983750053117, 'mass_end': 4.756983750053117,
                                            'branching_t': None, 'branches': [], 'max_branches': None, 't': 1,
                                            'pos': (1002.2920510838783, 977.6854812989415),
                                            'dir': (0.6083186936081879, 0.7936928669244973)}], 'max_branches': 0,
                                       't': 1, 'pos': (0, 0), 'dir': (-0.287338292353145, 0.957829163132747)}],
                                            'max_branches': None, 't': 0.011227924126081312, 'pos': (0, 0),
                                            'dir': (-0.8916981117166731, 0.45263061933647347)},
                                           {'id': 99, 'tier': 1, 'root_class': 0, 'length': 13.485467257011312,
                                            'max_length': 59.302207590126976, 'mass_start': 3.7569837500531174,
                                            'mass_end': 4.9430279018556575, 'branching_t': [], 'branches': [
                                               {'id': 99, 'tier': 2, 'root_class': 0, 'length': 6.0, 'max_length': 6.0,
                                                'mass_start': 4.026693095193344, 'mass_end': 4.226693095193344,
                                                'branching_t': None, 'branches': [
                                                   {'id': 99, 'tier': 2, 'root_class': 0, 'length': 18.0,
                                                    'max_length': 18.0,
                                                    'mass_start': 4.226693095193344, 'mass_end': 4.8266930951933436,
                                                    'branching_t': [], 'branches': [
                                                       {'id': 300, 'tier': 2, 'root_class': 0,
                                                        'length': 0.1286089846994808,
                                                        'max_length': 6.0, 'mass_start': 4.8266930951933436,
                                                        'mass_end': 5.026693095193344, 'branching_t': None,
                                                        'branches': [],
                                                        'max_branches': None, 't': 1,
                                                        'pos': (1015.5479099306973, 982.2972303962281),
                                                        'dir': (-0.8874046325627332, 0.4609913427670856)}],
                                                    'max_branches': 0, 't': 1, 'pos': (0, 0),
                                                    'dir': (-0.013374305643656693, 0.999910559974516)}],
                                                'max_branches': None, 't': 0.22707725177001115, 'pos': (0, 0),
                                                'dir': (-0.12101119359068462, 0.9926511426607828)},
                                               {'id': 99, 'tier': 1, 'root_class': 0, 'length': 12.309592115353087,
                                                'max_length': 45.81674033311566, 'mass_start': 4.026693095193344,
                                                'mass_end': 4.9430279018556575, 'branching_t': [], 'branches': [
                                                   {'id': 99, 'tier': 2, 'root_class': 0, 'length': 6.0,
                                                    'max_length': 6.0,
                                                    'mass_start': 4.272884937500406, 'mass_end': 4.472884937500406,
                                                    'branching_t': None, 'branches': [
                                                       {'id': 200, 'tier': 2, 'root_class': 0,
                                                        'length': 10.742853715487602,
                                                        'max_length': 18.0, 'mass_start': 4.472884937500406,
                                                        'mass_end': 5.072884937500406, 'branching_t': [], 'branches': [
                                                           {'id': 300, 'tier': 2, 'root_class': 0, 'length': 0,
                                                            'max_length': 6.0, 'mass_start': 5.072884937500406,
                                                            'mass_end': 5.2728849375004065, 'branching_t': None,
                                                            'branches': [], 'max_branches': None, 't': 1,
                                                            'pos': (1033.3607166902732, 971.681556827941),
                                                            'dir': (-0.3385068914482965, 0.940963912401539)}],
                                                        'max_branches': 0, 't': 1, 'pos': (0, 0),
                                                        'dir': (0.8081767187563301, 0.5889400574423952)}],
                                                    'max_branches': None, 't': 0.26812191500857274, 'pos': (0, 0),
                                                    'dir': (-0.8179775393841894, 0.5752501586814096)},
                                                   {'id': 99, 'tier': 1, 'root_class': 0, 'length': 11.44391578938983,
                                                    'max_length': 33.50714821776258, 'mass_start': 4.272884937500406,
                                                    'mass_end': 4.9430279018556575, 'branching_t': [], 'branches': [
                                                       {'id': 99, 'tier': 2, 'root_class': 0, 'length': 6.0,
                                                        'max_length': 6.0, 'mass_start': 4.501763253288202,
                                                        'mass_end': 4.7017632532882025, 'branching_t': None,
                                                        'branches': [
                                                            {'id': 200, 'tier': 2, 'root_class': 0,
                                                             'length': 3.8765042418537132, 'max_length': 18.0,
                                                             'mass_start': 4.7017632532882025,
                                                             'mass_end': 5.301763253288202,
                                                             'branching_t': [], 'branches': [
                                                                {'id': 300, 'tier': 2, 'root_class': 0, 'length': 0,
                                                                 'max_length': 6.0, 'mass_start': 5.301763253288202,
                                                                 'mass_end': 5.501763253288202, 'branching_t': None,
                                                                 'branches': [], 'max_branches': None, 't': 1,
                                                                 'pos': (1038.5069867004431, 969.4274529106983),
                                                                 'dir': (-0.9961286391649027, 0.08790753230229549)}],
                                                             'max_branches': 0, 't': 1, 'pos': (0, 0),
                                                             'dir': (0.987312606397248, 0.15878859294380296)}],
                                                        'max_branches': None, 't': 0.34103767378590943, 'pos': (0, 0),
                                                        'dir': (-0.9987917383982285, 0.049143293616164034)},
                                                       {'id': 200, 'tier': 1, 'root_class': 0,
                                                        'length': 16.460840403089517,
                                                        'max_length': 22.063232428372746,
                                                        'mass_start': 4.501763253288202,
                                                        'mass_end': 4.9430279018556575,
                                                        'branching_t': [0.4520253426674272],
                                                        'branches': [
                                                            {'id': 300, 'tier': 1, 'root_class': 0, 'length': 0,
                                                             'max_length': 20.0, 'mass_start': 4.9430279018556575,
                                                             'mass_end': 5.343027901855658, 'branching_t': None,
                                                             'branches': [], 'max_branches': None, 't': 1,
                                                             'pos': (1060.195774261193, 982.3616063930262),
                                                             'dir': (0.9995824983158749, 0.028893408601167923)}],
                                                        'max_branches': 1, 't': 1, 'pos': (0, 0),
                                                        'dir': (0.7852214091248133, 0.6192150988566434)}],
                                                    'max_branches': 2,
                                                    't': 1, 'pos': (0, 0),
                                                    'dir': (0.8749315275843278, 0.4842466541329476)}],
                                                'max_branches': 3, 't': 1, 'pos': (0, 0),
                                                'dir': (0.8515003663866524, 0.5243540083220464)}], 'max_branches': 4,
                                            't': 1,
                                            'pos': (0, 0), 'dir': (0.984473714101048, 0.1755320661420241)}],
                              'max_branches': 5, 't': 1, 'pos': (0, 0),
                              'dir': (0.9938117100016995, 0.11107783335795651)}],
                         'max_branches': None, 't': 0.5568857313216825, 'pos': (0, 0),
                         'dir': (0.986164961065277, 0.16576691336669352)},
                        {'id': 99, 'tier': 0, 'root_class': 0, 'length': 18.185321574794838,
                         'max_length': 32.13645368041287, 'mass_start': 3.343027901855657, 'mass_end': 4.2,
                         'branching_t': [], 'branches': [
                            {'id': 99, 'tier': 1, 'root_class': 0, 'length': 20.0, 'max_length': 20.0,
                             'mass_start': 3.8279698105168527, 'mass_end': 4.227969810516853, 'branching_t': None,
                             'branches': [
                                 {'id': 99, 'tier': 1, 'root_class': 0, 'length': 2.149859540878562, 'max_length': 60.0,
                                  'mass_start': 4.227969810516853, 'mass_end': 5.427969810516853, 'branching_t': [],
                                  'branches': [{'id': 99, 'tier': 2, 'root_class': 0, 'length': 6.0, 'max_length': 6.0,
                                                'mass_start': 4.270967001334424, 'mass_end': 4.470967001334424,
                                                'branching_t': None, 'branches': [
                                          {'id': 200, 'tier': 2, 'root_class': 0, 'length': 10.800391800467073,
                                           'max_length': 18.0, 'mass_start': 4.470967001334424,
                                           'mass_end': 5.070967001334424, 'branching_t': [], 'branches': [
                                              {'id': 300, 'tier': 2, 'root_class': 0, 'length': 0, 'max_length': 6.0,
                                               'mass_start': 5.070967001334424, 'mass_end': 5.270967001334424,
                                               'branching_t': None, 'branches': [], 'max_branches': None, 't': 1,
                                               'pos': (993.7488167549444, 973.836182822134),
                                               'dir': (-0.8368497239710653, 0.5474326803265875)}], 'max_branches': 0,
                                           't': 1, 'pos': (0, 0), 'dir': (-0.9487698920169485, 0.31596786545809996)}],
                                                'max_branches': None, 't': 0.03559480646227853, 'pos': (0, 0),
                                                'dir': (0.45526541184346736, 0.8903557742717223)},
                                               {'id': 99, 'tier': 1, 'root_class': 0, 'length': 25.814975996190046,
                                                'max_length': 57.85014045912144, 'mass_start': 4.270967001334424,
                                                'mass_end': 5.427969810516853, 'branching_t': [], 'branches': [
                                                   {'id': 100, 'tier': 2, 'root_class': 0, 'length': 1.3114062027530415,
                                                    'max_length': 6.0, 'mass_start': 4.787266521258225,
                                                    'mass_end': 4.987266521258225, 'branching_t': None, 'branches': [
                                                       {'id': 200, 'tier': 2, 'root_class': 0, 'length': 0,
                                                        'max_length': 18.0, 'mass_start': 4.987266521258225,
                                                        'mass_end': 5.5872665212582255, 'branching_t': [], 'branches': [
                                                           {'id': 300, 'tier': 2, 'root_class': 0, 'length': 0,
                                                            'max_length': 6.0, 'mass_start': 5.5872665212582255,
                                                            'mass_end': 5.787266521258226, 'branching_t': None,
                                                            'branches': [], 'max_branches': None, 't': 1,
                                                            'pos': (987.524266326535, 970.074727738409),
                                                            'dir': (0.9837047214235378, 0.17979160450098824)}],
                                                        'max_branches': 0, 't': 1, 'pos': (0, 0),
                                                        'dir': (0.9956549821731127, 0.09311904463566409)}],
                                                    'max_branches': None, 't': 0.4459497519426726, 'pos': (0, 0),
                                                    'dir': (-0.6159152289539429, 0.7878124337319208)},
                                                   {'id': 200, 'tier': 1, 'root_class': 0, 'length': 2.1856770045884035,
                                                    'max_length': 32.03516446293139, 'mass_start': 4.787266521258225,
                                                    'mass_end': 5.427969810516853,
                                                    'branching_t': [0.7142663030075918, 0.9019297053235811,
                                                                    0.9911700717319061], 'branches': [
                                                       {'id': 300, 'tier': 1, 'root_class': 0, 'length': 0,
                                                        'max_length': 20.0, 'mass_start': 5.427969810516853,
                                                        'mass_end': 5.827969810516853, 'branching_t': None,
                                                        'branches': [],
                                                        'max_branches': None, 't': 1,
                                                        'pos': (972.9528782641912, 974.8842139767013),
                                                        'dir': (-0.9504991295830716, 0.31072721905527245)}],
                                                    'max_branches': 3, 't': 1, 'pos': (0, 0),
                                                    'dir': (-0.8604858367486746, 0.5094743612341384)}],
                                                'max_branches': 4,
                                                't': 1, 'pos': (0, 0),
                                                'dir': (-0.9437568034140592, 0.33064043311379343)}],
                                  'max_branches': 5, 't': 1, 'pos': (0, 0),
                                  'dir': (-0.9972476926191446, 0.07414202294105691)}], 'max_branches': None,
                             't': 0.5651907870332868, 'pos': (0, 0), 'dir': (-0.9628485206483898, 0.2700420824338447)},
                            {'id': 99, 'tier': 0, 'root_class': 0, 'length': 11.944550091106928,
                             'max_length': 13.951132105618033, 'mass_start': 3.8279698105168527, 'mass_end': 4.2,
                             'branching_t': [], 'branches': [
                                {'id': 99, 'tier': 1, 'root_class': 0, 'length': 20.0, 'max_length': 20.0,
                                 'mass_start': 4.146491146279704, 'mass_end': 4.546491146279704, 'branching_t': None,
                                 'branches': [
                                     {'id': 99, 'tier': 1, 'root_class': 0, 'length': 5.517973250003204,
                                      'max_length': 60.0,
                                      'mass_start': 4.546491146279704, 'mass_end': 5.746491146279705, 'branching_t': [],
                                      'branches': [{'id': 100, 'tier': 2, 'root_class': 0, 'length': 5.223883502106728,
                                                    'max_length': 6.0, 'mass_start': 4.6568506112797685,
                                                    'mass_end': 4.856850611279769, 'branching_t': None, 'branches': [
                                              {'id': 200, 'tier': 2, 'root_class': 0, 'length': 0, 'max_length': 18.0,
                                               'mass_start': 4.856850611279769, 'mass_end': 5.456850611279769,
                                               'branching_t': [], 'branches': [
                                                  {'id': 300, 'tier': 2, 'root_class': 0, 'length': 0,
                                                   'max_length': 6.0,
                                                   'mass_start': 5.456850611279769, 'mass_end': 5.656850611279769,
                                                   'branching_t': None, 'branches': [], 'max_branches': None, 't': 1,
                                                   'pos': (1035.6972282604704, 982.8659552464445),
                                                   'dir': (0.5131657437687064, 0.8582895312319209)}], 'max_branches': 0,
                                               't': 1, 'pos': (0, 0), 'dir': (0.9466614915953142, 0.3222297632599056)}],
                                                    'max_branches': None, 't': 0.09124394185634876, 'pos': (0, 0),
                                                    'dir': (0.8544657580951331, 0.5195077172120829)},
                                                   {'id': 200, 'tier': 1, 'root_class': 0, 'length': 8.70647250351122,
                                                    'max_length': 54.4820267499968, 'mass_start': 4.6568506112797685,
                                                    'mass_end': 5.746491146279705,
                                                    'branching_t': [0.3042707820637528, 0.8253731247661089,
                                                                    0.9529500564379634, 0.954003131827468],
                                                    'branches': [
                                                        {'id': 300, 'tier': 1, 'root_class': 0, 'length': 0,
                                                         'max_length': 20.0, 'mass_start': 5.746491146279705,
                                                         'mass_end': 6.146491146279705, 'branching_t': None,
                                                         'branches': [],
                                                         'max_branches': None, 't': 1,
                                                         'pos': (1032.901011054379, 993.7712393834958),
                                                         'dir': (0.46144785809221317, 0.8871673316021667)}],
                                                    'max_branches': 4, 't': 1, 'pos': (0, 0),
                                                    'dir': (0.12492464055354809, 0.9921662331396724)}],
                                      'max_branches': 5,
                                      't': 1, 'pos': (0, 0), 'dir': (0.11561678964191308, 0.9932938930411772)}],
                                 'max_branches': None, 't': 0.8556228389559652, 'pos': (0, 0),
                                 'dir': (-0.3742345731005722, 0.9273340737276036)},
                                {'id': 99, 'tier': 0, 'root_class': 0, 'length': 2.006582014511105,
                                 'max_length': 2.006582014511105, 'mass_start': 4.146491146279704, 'mass_end': 4.2,
                                 'branching_t': [0.8846657048297577], 'branches': [
                                    {'id': 300, 'tier': 0, 'root_class': 0, 'length': 23.661752300624734,
                                     'max_length': 30.0, 'mass_start': 4.2, 'mass_end': 5.0, 'branching_t': None,
                                     'branches': [], 'max_branches': None, 't': 1,
                                     'pos': (1042.3567465590643, 961.601653512728),
                                     'dir': (0.14098718149422454, 0.9900114214766992)}], 'max_branches': 1, 't': 1,
                                 'pos': (0, 0), 'dir': (0.9876075802435326, 0.156943516736163)}], 'max_branches': 2,
                             't': 1,
                             'pos': (0, 0), 'dir': (0.9944515021187963, 0.10519605474384357)}], 'max_branches': 3,
                         't': 1,
                         'pos': (0, 0), 'dir': (0.9989901960207231, 0.04492870190064758)}], 'max_branches': 4, 't': 1,
                     'pos': (0, 0), 'dir': (0.9633751994420918, 0.26815709034054985)}], 'max_branches': 5, 't': 1,
                 'pos': (0, 0), 'dir': (0.4415991506636144, 0.8972124554046128)}], 'max_branches': None, 't': None,
             'pos': (0, 0), 'dir': (0.2899026019375908, 0.9570561537286173)},
            {'id': 100, 'tier': 0, 'root_class': 2, 'length': 129.92477590278543, 'max_length': 160.0,
             'mass_start': 3.856544242079102, 'mass_end': 5.056544242079102, 'branching_t': None, 'branches': [
                {'id': 200, 'tier': 0, 'root_class': 2, 'length': 0, 'max_length': 480.0,
                 'mass_start': 5.056544242079102,
                 'mass_end': 8.656544242079102,
                 'branching_t': [0.37521276027898465, 0.4365952720346924, 0.9348537241902561], 'branches': [
                    {'id': 300, 'tier': 0, 'root_class': 2, 'length': 0, 'max_length': 160.0,
                     'mass_start': 8.656544242079102, 'mass_end': 9.856544242079101, 'branching_t': None,
                     'branches': [],
                     'max_branches': None, 't': 1, 'pos': (1084.2532516798726, 917.1925859318228),
                     'dir': (0.7149906338197114, 0.6991340311772039)}], 'max_branches': 3, 't': 1, 'pos': (0, 0),
                 'dir': (0.9995593295069667, 0.029684116890740003)}], 'max_branches': None, 't': None, 'pos': (0, 0),
             'dir': (0.9948314382822926, 0.1015401861589045)}]}
        root_ls = LSystem.DictToRoot.load_root_system(root)
        root_dict = root_ls.to_dict()
        assert root.__eq__(root_dict)
